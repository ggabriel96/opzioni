
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/terminal.svg">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Customizing programs - opzioni docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,400i,700%7CJetBrains+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Inter";--md-code-font-family:"JetBrains Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-programs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="opzioni docs" class="md-header__button md-logo" aria-label="opzioni docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 0 1-.22.53l-2.75 2.75a.75.75 0 0 1-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 1 1 1.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5h-5z"/><path fill-rule="evenodd" d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0 1 22.25 21H1.75A1.75 1.75 0 0 1 0 19.25V4.75zm1.75-.25a.25.25 0 0 0-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V4.75a.25.25 0 0 0-.25-.25H1.75z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            opzioni docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Customizing programs
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ggabriel96/opzioni/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ggabriel96/opzioni
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../the-basics/" class="md-tabs__link md-tabs__link--active">
        User guide
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="opzioni docs" class="md-nav__button md-logo" aria-label="opzioni docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 0 1-.22.53l-2.75 2.75a.75.75 0 0 1-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 1 1 1.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5h-5z"/><path fill-rule="evenodd" d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0 1 22.25 21H1.75A1.75 1.75 0 0 1 0 19.25V4.75zm1.75-.25a.25.25 0 0 0-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V4.75a.25.25 0 0 0-.25-.25H1.75z"/></svg>

    </a>
    opzioni docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ggabriel96/opzioni/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ggabriel96/opzioni
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        User guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../the-basics/" class="md-nav__link">
        The basics
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Customizing programs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Customizing programs
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#name" class="md-nav__link">
    name
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#title" class="md-nav__link">
    title
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version" class="md-nav__link">
    version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#details" class="md-nav__link">
    details
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#msg_width" class="md-nav__link">
    msg_width
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error_handler" class="md-nav__link">
    error_handler
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ggabriel96/opzioni/edit/master/docs/user-guide/customizing-programs.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="customizing-programs">Customizing programs<a class="headerlink" href="#customizing-programs" title="Permanent link">&para;</a></h1>
<p>The following sections explain the various attributes of <code>Program</code> and how to set them via the provided member functions.</p>
<p>In code, however, they are not member variables of <code>Program</code> (that's why I called them attributes instead).
They are actually member variables of the <code>ProgramMetadata</code> class, held in the <code>metadata</code> member variable of <code>Program</code>.</p>
<p>This detail deserves a longer explanation somewhere else, so to keep things short here, it suffices to say that it serves the purpose of having a common data structure between <code>Program</code> and <code>ProgramView</code>.
<code>ProgramView</code> is like a <code>std::string_view</code>, but for <code>Program</code>, and all program data is accessible through it, including its arguments and commands.</p>
<h3 id="name"><code>name</code><a class="headerlink" href="#name" title="Permanent link">&para;</a></h3>
<p>The first and most basic information of <code>Program</code> is <code>name</code>.
It is the only attribute that the user is required to provide.
Thus, it is specified in the constructor:</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>It is used, for example, when printing the automatic help text, and as identifier when adding a program as command of another program.</p>
<p>Output of the snippet above<sup id="fnref:snippet-output"><a class="footnote-ref" href="#fn:snippet-output">1</a></sup>:</p>
<div class="highlight"><pre><span></span><code>wget

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information
</code></pre></div>
<h3 id="title"><code>title</code><a class="headerlink" href="#title" title="Permanent link">&para;</a></h3>
<p>The <code>title</code> is like the headline of the program.
It is optional, but is also given in the constructor, as the second argument:</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>There is currently no special use for it, so it is only informational.</p>
<p>Output of the snippet above:</p>
<div class="highlight"><pre><span></span><code>wget - a non-interactive network retriever

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information
</code></pre></div>
<h3 id="version"><code>version</code><a class="headerlink" href="#version" title="Permanent link">&para;</a></h3>
<p><code>version</code> is... well, the program version.
It is specified via the <code>version</code> member function and can be any string.</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">version</span><span class="p">(</span><span class="s">&quot;1.20.3&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>In the automatic help, it is printed right next to the program name in the title line, so it is best to keep it within a maximum of ~16 characters.</p>
<p>Output of the snippet above:</p>
<div class="highlight"><pre><span></span><code>wget 1.20.3 - a non-interactive network retriever

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information
</code></pre></div>
<h3 id="introduction"><code>introduction</code><a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h3>
<p><code>introduction</code> is what goes between the program name and its list of arguments.
So, for example, it can be used as an actual introduction to the program and what it does, or some message about its usage.
It is specified via the <code>intro</code> member function.</p>
<p>It has a special purpose, though.
The introduction is used as the description for commands in the automatic help text of their parent program.
In that case, an actual introduction is recommended.
So an introduction like the one in the example below is OK if the program is the root program.
It's also best to keep it short (2 or 3 lines maximum).</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">version</span><span class="p">(</span><span class="s">&quot;1.20.3&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">intro</span><span class="p">(</span><span class="s">&quot;Mandatory arguments to long options are mandatory for short options too.&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Output of the snippet above:</p>
<div class="highlight"><pre><span></span><code>wget 1.20.3 - a non-interactive network retriever

Mandatory arguments to long options are mandatory for short options too.

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information
</code></pre></div>
<h3 id="details"><code>details</code><a class="headerlink" href="#details" title="Permanent link">&para;</a></h3>
<p><code>details</code> is a piece of text that goes after the list of arguments.
It can be used, for example, to add some details that weren't relevant before, like website, documentation, or contact information.
It is specified via the <code>details</code> member function.</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">version</span><span class="p">(</span><span class="s">&quot;1.20.3&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">intro</span><span class="p">(</span><span class="s">&quot;Mandatory arguments to long options are mandatory for short options too.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">details</span><span class="p">(</span><span class="s">&quot;Email bug reports, questions, discussions to &lt;bug-wget@gnu.org&gt;&quot;</span><span class="w"></span>
<span class="w">               </span><span class="s">&quot; and/or open issues at https://savannah.gnu.org/bugs/?func=additem&amp;group=wget.&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Note that C++ allows strings to be break into separate pieces for better code formatting, but that does not affect the output of the automatic help.
Don't make it too long, though, as that will move the argument list up in the help text.</p>
<p>Output of the snippet above:</p>
<div class="highlight"><pre><span></span><code>wget 1.20.3 - a non-interactive network retriever

Mandatory arguments to long options are mandatory for short options too.

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information

Email bug reports, questions, discussions to &lt;bug-wget@gnu.org&gt; and/or open issues at
https://savannah.gnu.org/bugs/?func=additem&amp;group=wget.
</code></pre></div>
<h3 id="msg_width"><code>msg_width</code><a class="headerlink" href="#msg_width" title="Permanent link">&para;</a></h3>
<p>The <code>msg_width</code> is what determines the maximum width of the messages that opzioni will output related to the program.
For example, it is used when printing the automatic help and when using the built-in error handling actions.
The default is <code>100</code> and it can be changed via the <code>msg_width</code> member function.</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">version</span><span class="p">(</span><span class="s">&quot;1.20.3&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">intro</span><span class="p">(</span><span class="s">&quot;Mandatory arguments to long options are mandatory for short options too.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">details</span><span class="p">(</span><span class="s">&quot;Email bug reports, questions, discussions to &lt;bug-wget@gnu.org&gt;&quot;</span><span class="w"></span>
<span class="w">               </span><span class="s">&quot; and/or open issues at https://savannah.gnu.org/bugs/?func=additem&amp;group=wget.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">msg_width</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Output of the snippet above:</p>
<div class="highlight"><pre><span></span><code>wget 1.20.3 - a non-interactive network retriever

Mandatory arguments to long options are mandatory for short
options too.

Usage:
    wget [--help]

Options &amp; Flags:
    -h, --help    Display this information

Email bug reports, questions, discussions to &lt;bug-wget@gnu.org&gt;
and/or open issues at
https://savannah.gnu.org/bugs/?func=additem&amp;group=wget.
</code></pre></div>
<p>It is a best-effort, though, so don't make it too narrow.
If the maximum width is not enough for long words (like the URL above), they will be printed in a dedicated line anyway
(try this last snippet with a maximum width of 32).</p>
<h3 id="error_handler"><code>error_handler</code><a class="headerlink" href="#error_handler" title="Permanent link">&para;</a></h3>
<p><code>error_handler</code> determines how the program behaves when a user error occurs.
This doesn't affect the automatic help text.</p>
<p>The default is to print the error message and the usage of the program.
Changing it is done via the <code>on_error</code> member function.
For example, to only print the error message:</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">Program</span><span class="p">(</span><span class="s">&quot;wget&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a non-interactive network retriever&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">version</span><span class="p">(</span><span class="s">&quot;1.20.3&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">intro</span><span class="p">(</span><span class="s">&quot;Mandatory arguments to long options are mandatory for short options too.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">details</span><span class="p">(</span><span class="s">&quot;Email bug reports, questions, discussions to &lt;bug-wget@gnu.org&gt;&quot;</span><span class="w"></span>
<span class="w">               </span><span class="s">&quot; and/or open issues at https://savannah.gnu.org/bugs/?func=additem&amp;group=wget.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">msg_width</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">on_error</span><span class="p">(</span><span class="n">print_error</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>This also deserves a longer documentation, but until that's available, here is a brief explanation:</p>
<p>The argument to <code>on_error</code> must be of the <code>ErrorHandler</code> type, which is actually a <code>using</code> declaration for the following function pointer:</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">ErrorHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="n">ProgramView</span><span class="w"> </span><span class="k">const</span><span class="p">,</span><span class="w"> </span><span class="n">UserError</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">&amp;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><code>ProgramView</code> was introduced <a href="#customizing-programs">earlier</a>.</p>
<p><code>UserError</code> is the base class of the exceptions that are thrown when a user error occurs (user as in user of the command-line program).
All opzioni exceptions inherit from <code>std::exception</code>, so the error message can be obtained via their <code>what</code> member function.</p>
<p>Currently, the built-in error handlers are:</p>
<ul>
<li><code>print_error</code>: print the error message only.</li>
<li><code>print_error_and_usage</code>: print the error message and the program usage (the default).</li>
<li><code>rethrow</code>: rethrow the exception.</li>
</ul>
<p>Just a detail about <code>rethrow</code>: note that, given the signature of <code>ErrorHandler</code>, the information of the actual class of the exception that was thrown is lost.
In order to preserve their type information (and also be able to granularly catch exceptions, if that's desired), use the <code>parse</code> free function instead of <code>Program</code>'s call operator when parsing the command-line.
Just add a <code>try</code> and as many <code>catch</code>es as desired to the following snippet:</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p">(</span><span class="n">wget</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="n">argc</span><span class="p">});</span><span class="w"></span>
</code></pre></div>
<p><code>argc</code> and <code>argv</code> are "flipped" and within <code>{}</code> because that's constructing a <code>std::span</code>.</p>
<p>Calling <code>parse</code> instead of <code>Program::operator()</code> avoids the built-in <code>try... catch</code> (which invokes <code>error_handler</code>).
This means that "unsetting" or clearing <code>error_handler</code> isn't needed.
In fact, <code>on_error(nullptr)</code> or <code>on_error(NULL)</code> doesn't compile.
<code>error_handler</code> is a required attribute of <code>Program</code>.</p>
<!-- footnotes -->
<div class="footnote">
<hr />
<ol>
<li id="fn:snippet-output">
<p>snippet output generated by adding the automatic help to the example.&#160;<a class="footnote-backref" href="#fnref:snippet-output" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../the-basics/" class="md-footer__link md-footer__link--prev" aria-label="Previous: The basics" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              The basics
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>